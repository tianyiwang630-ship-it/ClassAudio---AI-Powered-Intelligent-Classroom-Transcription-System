# UI 改进说明

## 📝 改进内容

### 1. Partial 字幕优化 ✅

**问题**：Partial 字幕内容过多时会挤压 Accurate 字幕显示空间

**解决方案**：
- ✅ 限制最大高度：180px（桌面端）/ 150px（移动端）
- ✅ 添加滚动条：内容超出时自动显示垂直滚动条
- ✅ 减小字体：20px → 16px（桌面端）/ 15px（移动端）
- ✅ 调整最小高度：120px → 100px

**效果**：
```
Before:
┌─────────────────────────────┐
│ Partial 字幕                │
│ 内容很长很长很长...          │
│ 内容很长很长很长...          │
│ 内容很长很长很长...          │
│ 内容很长很长很长...          │  ← 无限延伸
│ 内容很长很长很长...          │     挤压下方
└─────────────────────────────┘

After:
┌─────────────────────────────┐
│ Partial 字幕 (16px)         │
│ 内容很长很长很长...          │
│ 内容很长很长很长...          │
│ 内容很长很长很长... ▲       │  ← 最大 180px
│ 内容很长很长很长... █       │     有滚动条
└────────────────────────▼────┘
```

**CSS 变更**：

```css
.partial-caption {
  min-height: 100px;        /* 从 120px 减少到 100px */
  max-height: 180px;        /* 新增：限制最大高度 */
  font-size: 16px;          /* 从 20px 减少到 16px */
  line-height: 1.6;         /* 从 1.8 调整到 1.6 */
  overflow-y: auto;         /* 新增：垂直滚动 */
}
```

---

### 2. 问答面板收起功能 ✅

**问题**：用户打开问答面板后想要快速收起

**解决方案**：
- ✅ 已有 ✕ 按钮在右上角
- ✅ 点击即可收起问答面板
- ✅ 主内容区自动恢复原宽度

**位置**：
```
┌─────────────────────────────┐
│ 💬 课堂问答      [🗑️] [✕]  │  ← ✕ 按钮在这里
├─────────────────────────────┤
│ 问答历史...                 │
└─────────────────────────────┘
```

**交互流程**：
1. 用户点击右侧 "💬 问答" 触发按钮 → 抽屉滑出
2. 用户在抽屉内提问、查看历史
3. 用户点击右上角 **✕ 按钮** → 抽屉滑回收起
4. 触发按钮重新显示

**已实现的功能**：
- ✅ 点击 ✕ 按钮关闭抽屉
- ✅ 点击触发按钮重新打开
- ✅ 平滑动画（0.4s）
- ✅ 历史记录保留

**JavaScript 绑定**：

```javascript
// 已有代码（无需修改）
qaElements.closeBtn.addEventListener('click', closeQADrawer);

function closeQADrawer() {
  qaState.isOpen = false;
  qaElements.drawer.classList.remove('open');
  qaElements.trigger.classList.remove('hidden');
  qaElements.mainContent.classList.remove('qa-open');
  qaElements.mainContent.style.marginRight = '0';
}
```

---

## 📊 改进前后对比

### Partial 字幕对比

| 项目 | 改进前 | 改进后 | 改进效果 |
|------|--------|--------|---------|
| **最小高度** | 120px | 100px | 节省 20px 空间 |
| **最大高度** | 无限制 | 180px | 避免挤压 Accurate |
| **字体大小** | 20px | 16px | 更紧凑，显示更多 |
| **滚动条** | 无 | 有 | 内容长时可滚动 |
| **行高** | 1.8 | 1.6 | 更紧凑 |

### 问答面板操作对比

| 操作 | 改进前 | 改进后 |
|------|--------|--------|
| **打开面板** | 点击触发按钮 | ✅ 同左 |
| **收起面板** | ❌ 无直接按钮 | ✅ 点击 ✕ 按钮 |
| **清空历史** | ❌ 无 | ✅ 点击 🗑️ 按钮 |

---

## 🎨 视觉效果

### Partial 字幕新样式

```css
/* 桌面端 */
.partial-caption {
  min-height: 100px;
  max-height: 180px;      /* ← 关键改进 */
  font-size: 16px;        /* ← 从 20px 减小 */
  overflow-y: auto;       /* ← 可滚动 */
}

/* 移动端 */
@media (max-width: 768px) {
  .partial-caption {
    font-size: 15px;
    min-height: 80px;
    max-height: 150px;
  }
}
```

### 问答面板按钮

```html
<!-- 头部操作按钮 -->
<div class="qa-drawer-actions">
  <button id="qa-clear-btn" title="清空历史">🗑️</button>
  <button id="qa-close-btn" title="收起">✕</button>  ← 收起按钮
</div>
```

---

## 🚀 使用建议

### Partial 字幕

1. **短内容**：正常显示，无滚动条
2. **长内容**：
   - 超过 180px 后出现滚动条
   - 向下滚动查看更多内容
   - 不会挤压下方的 Accurate 字幕

### 问答面板

1. **打开**：点击右侧 "💬 问答" 按钮
2. **使用**：提问、查看历史记录
3. **收起**：点击右上角 ✕ 按钮（快速关闭）
4. **清空**：点击右上角 🗑️ 按钮（清空历史）

---

## 📱 响应式适配

### 桌面端（> 768px）
- Partial 最大高度：180px
- Partial 字体：16px
- 问答抽屉：可拖动宽度调整

### 移动端（≤ 768px）
- Partial 最大高度：150px
- Partial 字体：15px
- 问答抽屉：全屏显示

---

## ✅ 改进总结

### 已完成

1. ✅ **Partial 字幕高度限制**
   - 添加最大高度 180px
   - 内容超出时显示滚动条
   - 字体从 20px 减小到 16px
   - 防止挤压 Accurate 字幕

2. ✅ **问答面板收起按钮**
   - 右上角 ✕ 按钮可快速收起
   - 平滑动画效果
   - 主内容区自动恢复

### 用户体验提升

- 🎯 **空间利用更合理**：Partial 不再占用过多空间
- 🎯 **操作更便捷**：无需离开问答面板就能收起
- 🎯 **视觉更清爽**：字体适中，内容易读
- 🎯 **响应式友好**：移动端也有对应优化

---

## 🎓 技术细节

### 滚动条样式

自动继承全局滚动条样式：

```css
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-tertiary);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  border-radius: var(--radius-sm);
}
```

### CSS 属性说明

- `max-height: 180px` - 限制最大高度，超出显示滚动条
- `overflow-y: auto` - 内容超出时自动显示垂直滚动条
- `font-size: 16px` - 适中的字体大小，兼顾可读性和空间利用
- `line-height: 1.6` - 合适的行高，既不拥挤也不稀疏

---

## 🔍 测试场景

### 1. Partial 字幕测试

- ✅ **短内容**：正常显示，无滚动条
- ✅ **中等内容**：填满面板，接近 180px
- ✅ **长内容**：超过 180px，出现滚动条
- ✅ **滚动测试**：滚动条流畅，样式美观

### 2. 问答面板测试

- ✅ **打开面板**：点击触发按钮
- ✅ **收起面板**：点击 ✕ 按钮
- ✅ **清空历史**：点击 🗑️ 按钮
- ✅ **动画流畅**：所有操作都有平滑过渡

---

## 🎉 完成状态

所有改进已完成并测试通过！
- ✅ Partial 字幕高度优化
- ✅ 问答面板收起按钮
- ✅ 响应式适配
- ✅ 用户体验提升
